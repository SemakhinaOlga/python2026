# Задание 33.4. Генераторы коллекций. list, dict, set comprehensions

## Блок урока
«Set comprehensions» позволяют собрать уникальные элементы после фильтрации данных и сразу привести их к нужному виду.

## Условие задачи
**Сложность**: <span style="color: #f9a825">● средний</span>. примерное время: 15–20 минут

Есть список `requests`, где каждый элемент — словарь `{ "service": str, "priority": str, "region": str }`. Построй множество `target_regions`, куда попадут регионы только тех запросов, у которых `priority` равен `"high"` или `"urgent"` и сервис входит в список `allowed_services`. Названия регионов нужно привести к верхнему регистру. Используй одно выражение set comprehension.

## Пример входных данных
```
requests = [
    {"service": "auth", "priority": "high", "region": "msk"},
    {"service": "billing", "priority": "low", "region": "ekb"},
    {"service": "storage", "priority": "urgent", "region": "msk"}
]
allowed_services = {"auth", "storage"}
```

## Пример выходных данных
```
{'MSK'}
```

## Критерии успешного выполнения
- Множество формируется единственным set comprehension.
- В результат попадают только регионы заявок с нужным приоритетом и сервисом.
- Регион приводится к верхнему регистру.
- Исходные структуры `requests` и `allowed_services` не изменяются.

## Подсказки
- Фильтр можно записать как `if req["priority"] in {"high", "urgent"} and req["service"] in allowed_services`.
- Преобразование регистра делай уже после проверки условий.

## Частые ошибки и ограничения
- Не создавай дополнительный цикл или вызов `set()` вокруг comprehension.
- Следи, чтобы множеству не добавлялись пустые строки.
- Не превышай лимит в пять пунктов в списках.
